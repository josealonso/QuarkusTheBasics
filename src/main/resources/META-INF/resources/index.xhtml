<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <f:facet name="last">
        <h:outputStylesheet name="css/style.css" />
    </f:facet>
    <title>DOCUMENT GENERATION</title>
</h:head>
<h:body>
    <h2 class="page-title">DOCUMENT GENERATION FORM</h2>
    <h:form>
        <p:panel header="Select Document Type" styleClass="custom-panel">
            <p:selectOneRadio value="#{formBean.selectedForm}" styleClass="select-one-radio">
                <f:selectItem itemLabel="Invoice" itemValue="invoice" />
                <f:selectItem itemLabel="Other" itemValue="other" />
                <p:ajax update="formPanel" />
            </p:selectOneRadio>
        </p:panel>

        <p:panel id="formPanel" styleClass="form-panel">
            <p:panelGrid columns="2" rendered="#{formBean.selectedForm eq 'invoice'}" styleClass="custom-panel-grid">
                <h:outputLabel for="invoiceNumber" value="Invoice Number:" />
                <p:inputNumber id="invoiceNumber" value="#{invoiceBean.invoiceNumber}" placeholder="Invoice Number">
                </p:inputNumber>

                <h:outputLabel for="invoiceDate" value="Invoice Date:" />
                <p:calendar id="invoiceDate" value="#{invoiceBean.invoiceDate}" placeholder="Invoice Date" required="true"/>

                <h:outputLabel for="customerName" value="Customer Name:" />
                <p:inputText id="customerName" value="#{invoiceBean.customerName}" placeholder="Customer Name"
                             regex="/^[a-zA-Z\s]*$/">
<!--                    <p:keyfilter regEx="/[a-z]/i" />-->
                </p:inputText>

                <h:outputLabel for="amount" value="Amount in euros:" />
                <p:inputNumber id="amount" value="#{invoiceBean.amount}"
                               symbolPosition="p" decimalPlaces="2" placeholder="Amount" />

            </p:panelGrid>

            <p:panelGrid columns="2" rendered="#{formBean.selectedForm eq 'other'}">
                <h:outputLabel for="otherType" value="Other Type:" />
                <p:inputText id="otherType" />

                <h:outputLabel for="description" value="Description:" />
                <p:inputTextarea id="description" />
            </p:panelGrid>
        </p:panel>

        <p:commandButton styleClass="custom-button" value="Submit" update="@form"
                         action="#{invoiceBean.submitInvoice}"
                              onclick = "PF('statusDialog').show()"
                              oncomplete="PF('statusDialog').hide()" />
        <p:messages id="messages" showDetail="true" closable="true" styleClass="form-panel" />

    </h:form>

    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
        <p:graphicImage name="/images/ajaxloadingbar.gif" />
        <h:outputText value="Generating invoice...." />
    </p:dialog>

</h:body>
</html>

















