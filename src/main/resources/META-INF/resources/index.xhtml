<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <f:facet name="last">
        <h:outputStylesheet name="css/style.css" />
    </f:facet>
    <title>DOCUMENT GENERATION</title>
</h:head>
<h:body>
    <h2 class="page-title">DOCUMENT GENERATION FORM</h2>
    <h:form>
        <p:panel header="Select Document Type" styleClass="custom-panel">
            <p:selectOneRadio value="#{formBean.selectedForm}" styleClass="select-one-radio">
                <f:selectItem itemLabel="Invoice" itemValue="invoice" />
                <f:selectItem itemLabel="Other" itemValue="other" />
                <p:ajax update="formPanel" />
            </p:selectOneRadio>
        </p:panel>

        <p:panel id="formPanel" styleClass="form-panel">
            <p:panelGrid columns="2" rendered="#{formBean.selectedForm eq 'invoice'}" styleClass="custom-panel-grid">

                <h:outputLabel for="@next" value="Invoice Number:" />
                <p:inputText id="invoiceNumber" value="#{invoiceBean.invoiceNumber}" placeholder="Invoice Number" />
<!--                <p:message for = "@previous" />-->
                <p:message for = "invoiceNumber" />
                <h:outputText value="#{invoiceBean.invoiceNumber}" />

                <h:outputLabel for="@next" value="Invoice Date:" />
                <p:calendar id="invoiceDate" value="#{invoiceBean.invoiceDate}" placeholder="Invoice Date" />
                <p:message for = "invoiceDate" />
                <h:outputText value="#{invoiceBean.invoiceDate}" />

                <h:outputLabel for="@next" value="Customer Name:" />
                <p:inputText id="customerName" value="#{invoiceBean.customerName}" placeholder="Customer Name">
                </p:inputText>
                <p:message for = "customerName" />
                <h:outputText value="#{invoiceBean.customerName}" />

                <h:outputLabel for="@next" value="Amount in euros:" />
                <p:inputText id="amount" value="#{invoiceBean.amount}" placeholder="Amount" />
                <p:message for = "amount" />
                <h:outputText value="#{invoiceBean.amount}" />

            </p:panelGrid>

            <p:panelGrid columns="2" rendered="#{formBean.selectedForm eq 'other'}">
                <h:outputLabel for="otherType" value="Other Type:" />
                <p:inputText id="otherType" />

                <h:outputLabel for="description" value="Description:" />
                <p:inputTextarea id="description" />
            </p:panelGrid>
        </p:panel>

        <p:commandButton styleClass="custom-button" value="Submit" update="@form"
                         action="#{invoiceBean.submitInvoice}"
                              onclick = "PF('statusDialog').show()"
                              oncomplete="PF('statusDialog').hide()" >

            <f:param name="paramInvoiceNumber" value="#{invoiceBean.invoiceNumber}" />
            <f:param name="paramInvoiceDate" value="#{invoiceBean.invoiceDate}" />
            <f:param name="paramCustomerName" value="#{invoiceBean.customerName}" />
            <f:param name="paramInvoiceAmount" value="#{invoiceBean.amount}" />
        </p:commandButton>

        <!-- For global messages, use null as the first parameter. For field-specific messages, use the component ID -->
        <div>
            <h:messages id="messages" showDetail="true" globalOnly="true" />
        </div>
    </h:form>

    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
        <p:graphicImage name="/images/ajaxloadingbar.gif" />
        <h:outputText value="Generating invoice...." />
    </p:dialog>

</h:body>
</html>

















