<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head id="head">
    <f:facet name="last">
        <h:outputStylesheet name="css/style.css" />
    </f:facet>
    <title>DOCUMENT GENERATION</title>
</h:head>
<h:body>
    <h2 id="bodyTitle" class="page-title">DOCUMENT GENERATION FORM</h2>
    <h:form>

        <p:panel id="formPanel" styleClass="form-panel">
            <p:panelGrid columns="2" styleClass="custom-panel-grid">

                <h:outputLabel id="invoiceNumberLabel" for="@next" value="Invoice Number:" />
                <p:inputText id="invoiceNumber" value="#{invoiceBean.invoiceNumber}" placeholder="Invoice Number" />
<!--                <p:message for = "@previous" />-->
                <p:message id="invoiceNumberMessage" for = "invoiceNumber" />
                <h:outputText id="invoiceNumberOutput" value="#{invoiceBean.invoiceNumber}" />

                <h:outputLabel id="invoiceDateLabel" for="@next" value="Invoice Date:" />
                <p:calendar id="invoiceDate" value="#{invoiceBean.invoiceDate}" placeholder="Invoice Date" />
                <p:message id="invoiceDateMessage" for = "invoiceDate" />
                <h:outputText id="invoiceDateOutput" value="#{invoiceBean.invoiceDate}" />

                <h:outputLabel id="customerNameLabel" for="@next" value="Customer Name:" />
                <p:inputText id="customerName" value="#{invoiceBean.customerName}" placeholder="Customer Name">
                </p:inputText>
                <p:message id="customerNameMessage" for = "customerName" />
                <h:outputText id="customerNameOutput" value="#{invoiceBean.customerName}" />

                <h:outputLabel id="amountLabel" for="@next" value="Amount in euros:" />
                <p:inputText id="amount" value="#{invoiceBean.amount}" placeholder="Amount" />
                <p:message id="amountMessage" for = "amount" />
                <h:outputText id="amountOutput" value="#{invoiceBean.amount}" />

            </p:panelGrid>

        </p:panel>

        <p:commandButton id="submitButton" styleClass="custom-button" value="Submit" update="@form"
                         action="#{invoiceBean.submitInvoice}"
                              onclick = "PF('statusDialog').show()"
                              oncomplete="PF('statusDialog').hide()" >

            <f:param name="paramInvoiceNumber" value="#{invoiceBean.invoiceNumber}" />
            <f:param name="paramInvoiceDate" value="#{invoiceBean.invoiceDate}" />
            <f:param name="paramCustomerName" value="#{invoiceBean.customerName}" />
            <f:param name="paramInvoiceAmount" value="#{invoiceBean.amount}" />
        </p:commandButton>

        <!-- For global messages, use null as the first parameter. For field-specific messages, use the component ID -->
        <div>
            <h:messages id="messages" showDetail="true" globalOnly="true" />
        </div>
    </h:form>

    <p:button value="Back to My Invoices" outcome="index"
              style="margin-top: 3rem; margin-left: 45%;" />

    <p:dialog id="statusDialog" widgetVar="statusDialog" modal="true" draggable="false"
              closable="false" resizable="false" showHeader="false">
        <p:graphicImage id="ajaxLoadingBar" name="/images/ajaxloadingbar.gif" />
        <h:outputText id="statusText" value="Generating invoice...." />
    </p:dialog>

</h:body>
</html>

















